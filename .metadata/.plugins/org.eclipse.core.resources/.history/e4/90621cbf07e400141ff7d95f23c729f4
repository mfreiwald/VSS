package edu.hm.cs.vss;

import java.util.TreeSet;

public class Main_3_3 {

	static int NUMBER_PHILOSOPHERS = 6;
	static int NUMBER_SEATS = 5;
	
	public static void main(String[] args) {
			
		Table table = new Table(NUMBER_SEATS);

		for(int i=0; i<NUMBER_PHILOSOPHERS; i++) {
			Philosopher p = new Philosopher(i+1, table);
			p.start();
		}
		
	}

	
	private class Tab {
		TreeSet<String> freeSeats = new TreeSet<>();
		
		Tab() {
			freeSeats.add("1");
			freeSeats.add("2");
			freeSeats.add("3");
		}
		
		synchronized String sitDown() {
			if(freeSeats.isEmpty()) {
				return null;
			} else {
				String seat = freeSeats.first();
				freeSeats.remove(seat);
				return seat;
			}
		}
		
		synchronized void standUp() {
			
		}
	}
	
	private class Phi extends Thread {
		private Tab table;
		Phi(int nr, Tab table) {
			this.table = table;
		}
		public void run() {
			
			while(table.sitDown() == null) {
				try {
					wait();
				} catch (InterruptedException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			}
			
			try {
				sleep(5000);
			} catch (InterruptedException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
			
			
			table.standUp();
		}
	}
}


